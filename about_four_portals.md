# About 5 Portals

# [Clipboard](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Clipboard.html)

From my understanding Clipboard portal is used mainly for RemoteDesktops and not for everyday casual use, which brings me to keep the dev on this backend to hold. `Only GNOME` has implemented a backend for it, that too it was in 2022, so if such a portal was added such recently, i dont think Clipboard portal is such an essential portal to be implemented in our preliminary phase.

GNOME PR on Clipboard: [I am working on adding a portal to allow clipboard control of remote desktop sessions.  Mutter already has methods to provide them, but they haven't been exposed through portal interface yet.](https://gitlab.gnome.org/GNOME/xdg-desktop-portal-gnome/-/merge_requests/53) 

ASHPD saying: [The portal is mostly meant to be used along with [`RemoteDesktop`]](https://github.com/bilelmoussaoui/ashpd/blob/master/src/desktop/clipboard.rs) 

# [Screenshot](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.impl.portal.Screenshot.html)

Screenshots portal is easy to implement, it just has two methods: Screenshot and ColorPicker(which might not be needed for us). Screenshot has params `modal` : whether dialogue should be modal or not, `interactive` : whether interactive screenshoting is needed or not, maybe adjusting the portion of the screenshot (if we dont really need the entire screen). `permission_store_checked` : whether the app that is open rn, allow screenshoting the current screen or not (for eg, rn whatsapp doesnt really allow screenshoting pfps). and `uri` of the screenshot taken is returned. For this portal, I could refer to [Cosmic’s portal](https://github.com/pop-os/xdg-desktop-portal-cosmic/blob/master/src/wayland/mod.rs#L45) and [Luminous portal](https://github.com/waycrate/xdg-desktop-portal-luminous/blob/master/src/screenshot.rs#L50), where Cosmic’s implementation is a lot more lower level. While Luminous([Waycrate](https://github.com/waycrate/)) has made a crate called [wayshot](https://github.com/waycrate/wayshot), that will help in taking screenshots for wlroots based compositors (implementing [zwlr_screencopy_v1](https://wayland.app/protocols/wlr-screencopy-unstable-v1)) 

Even though interactive, modal,permission_store might take some time to implement, apart from that a barebone. Screenshot portal backend could mad very fast, considering wayshot.

# [Settings](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.impl.portal.Settings.html)

Default Settings portal has 3 values with it, `color-scheme` , `accent-color`, `contrast` such that each of these values could be passed on to sandboxed applications, ( maybe a browser might have a default option to choose from Dark mode or light mode), from my understanding this portal can be altered in such a way that, this could be an interface for any applications to receive some global data, we could alter this portal/add new state vars that are globally needed by other applications also. But the thing is, this portal has [Read only methods only,](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.impl.portal.Settings.html#org-freedesktop-impl-portal-settings-readall) So maybe we need to keep another store for storing all global vars? or is there any other way to store these data inside portal itself? that is a thing to explore. Anyway if we’re using a store, it is reletively easy to implement, we just need to return value from storage. This can be done quickly, if needed. 

# [Wallpaper](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Wallpaper.html#org-freedesktop-portal-wallpaper-setwallpaperuri)

Wallpaper portal has 2 methods: [SetWallpaperURI](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Wallpaper.html#org-freedesktop-portal-wallpaper-setwallpaperuri) and [SetWallpaperFile](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Wallpaper.html#org-freedesktop-portal-wallpaper-setwallpaperfile). One needs a uri as arg and another needs a fd (file descriptor) as arg. It has other params: `show-preview` that should show a preview of the image choosen, `set-on` param that describes whether lockscreen, homescreen or both. and a `uri` / `fd` for data regarding location of image. There might be a hickup that we face, if we go to settings and click on change wallpaper or something, we might need our filechooser to pop up and our wallpaper portal to act according to the file it got back, and for default wallpaper files also, we might need to differentiate between 3 clients that might be ready to call our wallpaper portal, a) Choose wallpaper from Settings, b) Choose default wallpaper, c) Set this photo as Wallpaper, so we need to make our portal compliant with all these 3 use cases.

# [Notification](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Notification.html)

Notification portal has 2 methods, [AddNotification](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Notification.html#org-freedesktop-portal-notification-addnotification) and [RemoveNotification](https://flatpak.github.io/xdg-desktop-portal/docs/doc-org.freedesktop.portal.Notification.html#org-freedesktop-portal-notification-removenotification). Each of the Notification portal calls will have NotificationOptions: `title` , `body` (text content inside notifcation), `markup-body`(its like body itslef, but it allows a small bits of xml/html) ,`icon`(icon of notification) , `sound`, `priority`(low,normal,high,urgent), `default-action` (Action to be perfomed when notification is clicked), `default-action-target` (params to be sent when default-action is called), `button` (array of buttons to be diplayed on notification), `display-hint, category` . By the time of writing this doc, i have built a small version of a Notification portal, but the signature of my portal is not atm correct, so it is pushing errors saying signature of interfaces are not same. So i need to make my portal compliant with portal requests. after that i could write code such that this NotificationOptions from each request is passed to our Notification store, where it could be displayed.
